<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<link rel="import" href="telefone-validator.html">

<dom-module id="telefone-input">
  <style>
      :host {
        display: inline-block;
      }

      input[is="iron-input"] {
        font: inherit;
        outline: none;
        box-shadow: none;
        border: none;
        width: auto;
        text-align: center;
      }
    </style>
  <template>
    <telefone-validator></telefone-validator>

    <input is="iron-input" maxlength="2" bind-value="{{_ddd}}" size="2" aria-label="DDD">
    -
    <input is="iron-input" maxlength="9" bind-value="{{_numero}}" size="9" aria-label="NÃºmero">
  </template>
</dom-module>
<script>
(function() {
  Polymer({
    is: 'telefone-input',

    behaviors: [
      Polymer.IronValidatableBehavior
    ],

    properties: {
      value: {
        notify: true,
        type: String
      },

      id: {
        notify: true,
        type: String
      },

      _ddd: {
        type: String
      },

      _numero: {
        type: String
      },

      validator: {
        type: String,
        value: 'telefone-validator'
      }
    },

    observers: [
      '_computeValue(_ddd,_numero)'
    ],

    _computeValue: function(ddd, numero) {
      this.value = ddd.trim() + '' + numero.trim();
    }
  });
})();
</script>
